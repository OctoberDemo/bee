<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>亚太日报蜜蜂</title>
    <script src="bee.js"></script>
</head>
<body>
<script>
    Bee.setType("www.apdnews.com");
    Bee.setImgReferer("http://www.apdnews.com/");

    Bee.addChannel("国际", "亚太|东北亚", "http://www.apdnews.com/asia/neasia/");
    Bee.addChannel("国际", "亚太|东南亚", "http://www.apdnews.com/asia/seasia/");
    Bee.addChannel("国际", "亚太|南亚", "http://www.apdnews.com/asia/sasia/");
    Bee.addChannel("国际", "亚太|南太", "http://www.apdnews.com/asia/spacific/");
    Bee.addChannel("国际", "亚太|东盟", "http://www.apdnews.com/asia/asean/");
    Bee.addChannel("国际", "亚太|阿富汗", "http://www.apdnews.com/asia/afuhanzhengzhuan/");
    Bee.addChannel("国际", "亚太|平壤", "http://www.apdnews.com/asia/pingranggushi/");
    Bee.addChannel("国际", "亚太|东瀛", "http://www.apdnews.com/asia/yanguandongying/");
    Bee.addChannel("国际", "亚太|高棉", "http://www.apdnews.com/asia/man_gaomian/");
    Bee.addChannel("国际", "亚太|东南亚", "http://www.apdnews.com/asia/toushidongnanya/");
    Bee.addChannel("国际", "亚太|华人", "http://www.apdnews.com/asia/huarengushi/");

    Bee.addChannel("国内", "内地", "http://www.apdnews.com/china/mainland/");
    Bee.addChannel("国内", "香港", "http://www.apdnews.com/china/hongkong/");
    Bee.addChannel("国内", "台湾", "http://www.apdnews.com/china/taiwan/");
    Bee.addChannel("国内", "澳门", "http://www.apdnews.com/china/Macau/");
    Bee.addChannel("国内", "外媒", "http://www.apdnews.com/china/waimeiguancha/");
    Bee.addChannel("国内", "港媒", "http://www.apdnews.com/china/gangmeitoutiao/");
    Bee.addChannel("国内", "改革", "http://www.apdnews.com/china/zhongguogaige");
    Bee.addChannel("国内", "两岸关系", "http://www.apdnews.com/china/lianganguanxi/");

    Bee.addChannel("国际", "北美", "http://www.apdnews.com/world/North_America/");
    Bee.addChannel("国际", "欧洲", "http://www.apdnews.com/world/Europe/");
    Bee.addChannel("国际", "中东", "http://www.apdnews.com/info/world/Middle_East/");
    Bee.addChannel("国际", "非洲", "http://www.apdnews.com/world/Africa/");
    Bee.addChannel("国际", "拉美", "http://www.apdnews.com/world/Latin_America/");
    Bee.addChannel("国际", "大国博弈", "http://www.apdnews.com/world/daguoboyi/");
    Bee.addChannel("国际", "中美关系", "http://www.apdnews.com/world/zhongmeiguanxi/");
    Bee.addChannel("国际", "军情观察", "http://www.apdnews.com/world/junqingguancha/");
    Bee.addChannel("国际", "环球奇事", "http://www.apdnews.com/world/huanqiuqishi/");

    Bee.addChannel("财经", "宏观", "http://www.apdnews.com/business/economy/");
    Bee.addChannel("财经", "金融", "http://www.apdnews.com/business/finance/");
    Bee.addChannel("财经", "公司", "http://www.apdnews.com/business/companies/");
    Bee.addChannel("财经", "理财", "http://www.apdnews.com/business/management/");
    Bee.addChannel("财经", "观察", "http://www.apdnews.com/business/observation/");
    Bee.addChannel("财经", "经济学家", "http://www.apdnews.com/business/economist/");
    Bee.addChannel("财经", "东盟", "http://www.apdnews.com/business/asean_view/");
    Bee.addChannel("财经", "亚太危机", "http://www.apdnews.com/business/opportunity/");

    Bee.addChannel("科技", "互联网", "http://www.apdnews.com/it/internet");
    Bee.addChannel("科技", "大趋势", "http://www.apdnews.com/it/trend/");
    Bee.addChannel("科技", "科普|新知", "http://www.apdnews.com/it/science/");
    Bee.addChannel("科技", "环境|医卫", "http://www.apdnews.com/it/Environmental/");
    Bee.addChannel("科技", "仰望|星空", "http://www.apdnews.com/it/universe/");
    Bee.addChannel("科技", "新知|百科", "http://www.apdnews.com/it/xinzhibaike/");
    Bee.addChannel("科技", "产品|启示录", "http://www.apdnews.com/it/chanpinqishilu/");
    Bee.addChannel("科技", "新媒体", "http://www.apdnews.com/it/shuduxinmeiti/");

    Bee.addChannel("文化", "阅读", "http://www.apdnews.com/lifestyle/culture/");
    Bee.addChannel("艺术", "设计", "http://www.apdnews.com/lifestyle/design/");
    Bee.addChannel("影视", "明星", "http://www.apdnews.com/lifestyle/star/");
    Bee.addChannel("健康", "美容", "http://www.apdnews.com/lifestyle/health/");
    Bee.addChannel("时尚", "秀场", "http://www.apdnews.com/lifestyle/fashion/");
    Bee.addChannel("旅游", "http://www.apdnews.com/lifestyle/travel/");
    Bee.addChannel("艺术", "http://www.apdnews.com/lifestyle/yishukafeiting/");
    Bee.addChannel("生活", "创意", "http://www.apdnews.com/lifestyle/chuangyizhanyingting/");
    Bee.addChannel("生活", "趣闻", "http://www.apdnews.com/lifestyle/quwenzhidaoma/");
    Bee.addChannel("生活", "电影", "http://www.apdnews.com/lifestyle/dianyingqiangxiankan/");
    Bee.addChannel("生活", "展会", "http://www.apdnews.com/lifestyle/zhanhuichangxian/");
    Bee.addChannel("生活", "世遗|视觉", "http://www.apdnews.com/lifestyle/shiyishijue/");

    Bee.addChannel("教育", "出国|留学", "http://www.apdnews.com/education/abroad/");
    Bee.addChannel("教育", "亚太|高校", "http://www.apdnews.com/education/universities/");
    Bee.addChannel("教育", "职场|培训", "http://www.apdnews.com/education/job/");
    Bee.addChannel("教育", "基础教育", "http://www.apdnews.com/education/basic_education/");
    Bee.addChannel("教育", "良师", "http://www.apdnews.com/education/liangshihui/");
    Bee.addChannel("教育", "港漂", "http://www.apdnews.com/education/gangpiaoriji/");
    Bee.addChannel("教育", "创业", "http://www.apdnews.com/education/chuangyegushi/");

    Bee.addChannel("健康", "热点", "http://www.apdnews.com/health/Hotspot/");
    Bee.addChannel("健康", "行业", "http://www.apdnews.com/health/Industry/");
    Bee.addChannel("健康", "疾病", "http://www.apdnews.com/health/Disease/");
    Bee.addChannel("健康", "保健", "http://www.apdnews.com/health/Healthcare/");
    Bee.addChannel("健康", "中医", "http://www.apdnews.com/health/Chinese_Medicine/");
    Bee.addChannel("健康", "专题聚焦", "http://www.apdnews.com/health/zhuantijujiao/");
    Bee.addChannel("健康", "全球|医讯", "http://www.apdnews.com/health/quanqiuyixun/");
    Bee.addChannel("健康", "白领", "http://www.apdnews.com/health/bailingjiankang/");
    Bee.addChannel("健康", "心灵驿站", "http://www.apdnews.com/health/xinlingyizhan/");
    Bee.addChannel("健康", "美容|减肥", "http://www.apdnews.com/health/meirongjianfei/");

    Bee.setRefreshTime(1000 * 60 * 30 * 1);

    Bee.onListLoaded = function(dom) {
        var list = dom.byClass("module mNyList", true);
        if (list == undefined) {
            Bee.finishExtractList();
            return;
        }
        var h4s = list.byTags("h4");
        var items = [];
        for (var i = 0; i < h4s.length; i++) {
            var item = {};
            var h4 = h4s[i];
            item.title = h4.byTag("a").innerText;
            item.url = h4.byTag("a").href;
            item.key = Bee.hashCode(item.url);
            items.push(item);
        }
        Bee.finishExtractList(items);
    };

    Bee.onItemLoaded = function(dom, item) {
        var info = dom.byClass("info").innerText;
        var source = info.substring(info.indexOf("来源")+"来源".length + 1).trim();
        item.source = source;
        if (item.source.indexOf("亚太日报") < 0) {
            if (Bee.existSource(item.source)) {
                console.log("跳过来源：" + item.source);
                Bee.passItem(item);
                return;
            } else {
                console.log("未知来源：" + item.source);
            }
        }
        var create_time = info.substring(info.indexOf("时间") + "时间".length + 1, info.indexOf("来源")).trim();
        create_time = create_time.substring(create_time.indexOf("：")+1).trim();
        item.created_at = Bee.convertTime(create_time);

        var cont = dom.byId("viewContent");
        var intro = cont.byClass("intro");
        if (intro) {
            cont.removeClass("intro");
        }
        var content = Bee.htmlToJson(cont);
        if (intro) {
            content.unshift({
                desc: intro.innerText.trim()
            });
        }
        item.content = content;
        Bee.finishExtractItem(item);
    };

    Bee.start();
</script>
</body>
</html>